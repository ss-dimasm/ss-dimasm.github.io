import{a as i,F as v,j as a,_ as w}from"./index-154d360c.js";import{u as B,a2 as U,d as u,r as o,I as q,i as K,h as T,f as $,D as J,ay as Q,az as X,aA as P,F as I,aB as Z,aC as ee,x as ae,y as te,p as se,S as re,aD as ie}from"./elements-7fcf5525.js";import{C as M,l as oe,D as ne,G as de,H as le,u as ce,J as ue,K as pe,M as me,P as N,Q as he,S as ge,T as E,d as _,U as y,V as D,W as S,m as fe,X as Ae,Y as Ce}from"./app-071066e2.js";import{g as Te}from"./index-0d5dc733.js";import{u as Pe,A as k}from"./configuration-77a75c62.js";import{A as Ie,F as Ne}from"./feedback-button-cfab76c4.js";import"./index-35ae9ffb.js";import"./url-7b6b21ab.js";import"./index-6d471c01.js";const c={dateNumberContainer:"d15o9ykx",stickyHeaderWrapper:"s16twess",headerWrapper:"hshnm7d",pageWrapper:"pxz4qcc",overflowYHidden:"ouhlh5t",monthHeader:"m1vloq9t",monthHeaderField:"mgms8cp",dateDetailWrapper:"d17zpps6",dateDetailContainer:"d1ufb6km",fabWrapper:"f152pjto"},Ee=()=>i(v,{children:[a(B,{"data-testid":"controls-icon",className:"el-mb5",icon:"editAppInfographic",iconSize:"large"}),a(U,{"data-testid":"controls-description",hasGreyText:!0,children:Ie})]}),_e=u.lazy(()=>M(()=>w(()=>import("./schedule-page-eae529b5.js"),["assets/schedule-page-eae529b5.js","assets/index-154d360c.js","assets/elements-7fcf5525.js","assets/app-071066e2.js","assets/app-b3cc3715.css","assets/url-7b6b21ab.js","assets/index-43613dd1.js","assets/drawer-body-appointment-details-fdeb62c4.js","assets/index-0d5dc733.js","assets/all-confirmed-section.helpers-ba7ef93f.js","assets/index-51ec00a3.js","assets/index-fa19f396.js","assets/index-07d4f0a6.js","assets/configuration-77a75c62.js","assets/index-35ae9ffb.js","assets/appointment-card.helpers-093dcd1b.js","assets/index.esm-70abc844.js","assets/property-owner-0af14880.js","assets/index-a498209e.js","assets/index-bf805427.js","assets/all-confirmed-section-3b82c272.css","assets/isSameOrAfter-571fd34c.js","assets/isBetween-bb99a4b7.js","assets/index-c5c95794.js","assets/appointment-card-542df44b.js","assets/appointment-card-e26ba748.css"]))),ye=u.lazy(()=>M(()=>w(()=>import("./day-page-04cdcc15.js"),["assets/day-page-04cdcc15.js","assets/index-154d360c.js","assets/elements-7fcf5525.js","assets/app-071066e2.js","assets/app-b3cc3715.css","assets/url-7b6b21ab.js","assets/index-07d4f0a6.js","assets/index-43613dd1.js","assets/drawer-body-appointment-details-fdeb62c4.js","assets/index-0d5dc733.js","assets/all-confirmed-section.helpers-ba7ef93f.js","assets/index-51ec00a3.js","assets/index-fa19f396.js","assets/configuration-77a75c62.js","assets/index-35ae9ffb.js","assets/appointment-card.helpers-093dcd1b.js","assets/index.esm-70abc844.js","assets/property-owner-0af14880.js","assets/index-a498209e.js","assets/index-bf805427.js","assets/all-confirmed-section-3b82c272.css","assets/use-frequently-appointment-update-4fcce533.js","assets/index-b5e9b2df.js","assets/with-plugins-9d0f23e8.js","assets/isBetween-bb99a4b7.js","assets/isSameOrAfter-571fd34c.js","assets/modal-dialog-9f685d64.js","assets/index-073cf7c6.js","assets/day-page-070b8126.css"]))),De=()=>{const{encodeParamsAndAssignToURL:b,params:R}=oe(),{currentDate:s,setCurrentDate:p,setPlaceholderDateMetadata:m}=ne(),{bulkAddAdditionalMenu:x}=de(),{trackEvent:h}=le(),O=ce(),{setScheduleViewScrollPosition:L,setDayViewScrollPosition:g}=ue(),[r,V]=o.useState(pe(R.view)),{isMobile:d}=q(),{Modal:F,closeModal:H}=K();o.useEffect(me(d,H),[d]),o.useEffect(()=>{b({view:r,date:s.format(N)})},[s,r]);const W=o.useMemo(()=>he(s),[s]),[,,{isLoading:Y}]=Pe(),l=o.useRef(null),G=e=>{const t=_(e.currentTarget.value?e.currentTarget.value:new Date);h(D.INTERNAL_APP_STATE_CHANGE,{...S("DIARY"),Name:"Appointment List Date Picker",Action:`Changing date via date picker in ${fe.upperFirst(r)} view`,Value:t.format(N)})(),m({date:t,shouldScroll:!0}),p(t)},z=()=>{var e,t;try{if(!l.current)return;["ios","mac"].includes(Te())&&((e=l.current)==null||e.focus()),"showPicker"in HTMLInputElement.prototype&&((t=l.current)==null||t.showPicker())}catch(n){console.log("onDisplayMonthTextClick err",n)}},f=e=>{var C;const t={"MARKET APPRAISAL":{type:"VL",action:k.CREATE_APPOINTMENT_WITH_TYPE("Market Appraisal")},VIEWING:{type:"VW",action:k.CREATE_APPOINTMENT_WITH_TYPE("Viewing")}},n={appointment:{typeId:e?t[e].type:void 0},confirmation:{includeAttendee:null,includeProperty:null}};O({pathname:Ae.NEW_APPOINTMENT},{state:n}),h(D.INTERACTION_SECTION,{...S("DIARY"),Name:"Floating Menu Item",Action:((C=t==null?void 0:t[e])==null?void 0:C.action)??Ce.NAVIGATE("New Appointment"),"Event Type":"Click"})()},[A,j]=u.useState(!1);return o.useEffect(()=>{const e=d?[]:y(f);x(e.map(({label:t,onClick:n})=>({name:t,callback:n})))},[d]),Y?a(T,{"data-testid":"configuration-loader",fullPage:!0,label:"Loading"}):i(v,{children:[i($,{id:"page-container","data-testid":"page-container",className:J(c.pageWrapper,A&&c.overflowYHidden),children:[a(Q,{id:"header-container","data-testid":"header-wrapper",className:c.stickyHeaderWrapper,children:i(X,{className:"el-wfull",children:[a("div",{className:"el-p6 el-pb0",children:i(P,{children:[a(P,{children:i(I,{className:"el-wfull",isFlexColumn:!0,children:[a(Z,{"data-testid":"date-detail-relative-time",hasBoldText:!0,children:s.format("dddd,  MMMM D")}),a(I,{children:a(ee,{"data-testid":"date-detail-formatted-time",children:ge(s)})})]})}),i(ae,{children:[i("div",{"data-testid":"header-date-picker-wrapper",children:[a(te,{onClick:z,intent:"default",buttonSize:"small","data-testid":"header-display-month",buttonIcon:{icon:"downSystem",position:"right"},children:"Calendar"}),a("input",{type:"date",id:"month-date-picker","data-testid":"header-date-picker",onChange:G,ref:l,className:c.monthHeaderField})]}),a("div",{"data-testid":"header-view-picker-wrapper",children:a(se,{name:"view-picker","data-testid":"header-view-picker-input",options:[{id:"day-view",value:"day",text:"Day",isChecked:r==="day"},{id:"schedule-view",value:"schedule",text:"Schedule",isChecked:r==="schedule"}],onChange:e=>{r==="day"&&e.currentTarget.value=="schedule"&&g(E()??null),V(e.currentTarget.value)}})})]})]})}),a(re,{className:"el-px6",name:"days-in-a-week-tabs","data-testid":"days-in-a-week-tabs",isControlled:!0,isFullWidth:!0,hasNoBorder:!0,onChange:e=>{const t=_(e.currentTarget.value);p(t),m({date:t,shouldScroll:!0}),r==="day"&&(L(null),g(E()??null))},options:W.map(e=>({isChecked:e.startOf("day").isSame(s.startOf("day"))&&e.startOf("month").isSame(s.startOf("month"))&&e.startOf("year").isSame(s.startOf("year")),value:e.toISOString(),text:e.format("DD"),id:e.format("DD")}))})]})}),a(u.Suspense,{fallback:a(T,{fullPage:!0,label:"Loading"}),children:r==="day"?a(ye,{isDraggingState:[A,j]}):a(_e,{})}),a(Ne,{}),a(ie,{"data-testid":"home-page-mobile-control",buttonIcon:"addSystem",mobileControlItems:y(f)})]}),a(F,{title:"Controls",children:a(Ee,{})})]})},Le=De;export{Le as default};
