import{j as a,a as s,F as b}from"./index-e8b020c1.js";import{Z as R,r as q,h as _,k as x,l as N,o as P,v as Q,x as U,y,O as L,j}from"./elements-7fcf5525.js";import{g as k,h as T,q as v,m as h,r as g}from"./app-fc3be005.js";import{u as B}from"./index.esm-70abc844.js";import{u as K,a as Y}from"./use-update-admin-setup-metadata-d5cc30bc.js";import{u as $}from"./use-get-admin-setup-metadata-44fda336.js";import{t as G}from"./index-5dd4f8a7.js";import{Q as O}from"./queries-keys-1e9a6485.js";import{R as H}from"./options-21b6589e.js";import"./axios-7a17aed4.js";import"./index-f4612fa3.js";import"./hooks-05c80420.js";import"./middleware-a8d06d07.js";const W=r=>({rentFrequency:(r==null?void 0:r.rentFrequency)??null}),Z=()=>{var m,p;const r=k(),{connectSession:l}=T(r),d=v(),{data:t,isLoading:E}=$(),{info:u,error:c}=R(),i=(m=l==null?void 0:l.loginIdentity)==null?void 0:m.officeId,{register:F,handleSubmit:S,reset:D}=B({defaultValues:W((p=t==null?void 0:t.metadata)==null?void 0:p.defaultOptions)}),{mutateAsync:I,isLoading:w}=K(),{mutateAsync:f,isLoading:A}=Y(t==null?void 0:t.id),o=w||A;q.useEffect(()=>{var e,n;t&&!o&&D({rentFrequency:((n=(e=t==null?void 0:t.metadata)==null?void 0:e.defaultOptions)==null?void 0:n.rentFrequency)??null})},[t,o]);const C=async e=>{try{t?(await f({defaultOptions:e}),u(`Default options has been update successfully for '${i}' office ID`,3500)):(await I({defaultOptions:e}),u(`Default options has been set successfully for '${i}' office ID`,3500)),d.setQueryData(O.ARW_ADMIN_SETUP_KEYS.byOffice(i),n=>h.merge(n,{metadata:{defaultOptions:e}}))}catch(n){g(n)?c(n.readableMessage):console.log("Unknown error while update metadata",n)}},M=async()=>{try{await f({defaultOptions:{rentFrequency:null}}),d.setQueryData(O.ARW_ADMIN_SETUP_KEYS.byOffice(i),e=>h.merge(e,{metadata:{defaultOptions:null}})),u(`Default options has been reset successfully for '${i}' office ID`,3500)}catch(e){g(e)?c(e.readableMessage):console.log("Unknown error while update metadata",e)}};return E?a(_,{fullPage:!0,label:"Please wait..."}):a("div",{className:"el-wfull","data-testid":"default-opt-form-wrapper",children:s("form",{"data-testid":"default-opt-form",children:[a(x,{className:G.formLayout,children:s(N,{children:[a(P,{children:"Rent Frequency"}),s(Q,{className:"el-wfull","data-testid":"default-opt-rent-frequency",...F("rentFrequency"),children:[a("option",{disabled:!0,value:"",children:"Select Default Rent Frequency"}),H.map(e=>a("option",{value:e.id,children:e.value},e.id))]})]})}),s(U,{className:"el-mt8",children:[t&&a(y,{intent:"default",type:"button","data-testid":"default-opt-reset-button",disabled:o,loading:o,onClick:M,children:"Reset to Default"}),a(y,{intent:"primary","data-testid":"default-opt-confirm-button",disabled:o,loading:o,onClick:S(C),children:"Confirm"})]})]})})},z=()=>s(b,{children:[a(L,{children:"Default Option Configuration"}),a(j,{children:"Awesome description/guidance about default option configuration"})]}),de=()=>s(b,{children:[a(z,{}),a(Z,{})]});export{de as default};
