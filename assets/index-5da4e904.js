import{a as o,F as k,j as e}from"./index-154d360c.js";import{r as w,k as R,l as S,n as f,o as M,p as x,U as E,aX as O,aY as g,aU as T,D as A,aV as D,aW as y,bs as _,bt as F}from"./elements-7fcf5525.js";import{u as I}from"./index.esm-70abc844.js";import{a1 as P}from"./app-071066e2.js";import{M as v,g as U}from"./helper-ecb037af.js";import{D as j}from"./feedback-button-cfab76c4.js";const C=({searchFieldLabel:d,onMarketingModeFieldChange:i,onAddressFieldChange:l,headerContent:r})=>{const{register:n,watch:c}=I({mode:"all",defaultValues:{marketingMode:"selling"}}),{marketingMode:h}=c(),p=w.useMemo(()=>P.debounce(a=>{const{value:s}=a.target;l&&l(s)},j),[]),t=a=>{const{value:s}=a.target;i&&i(s)};return o(k,{children:[r&&r,o(R,{className:"el-mb8",children:[e(S,{children:e(f,{...n("address",{onChange:p}),label:d===!1?void 0:d||"Search address","data-testid":"sync-property-search-address-field",type:"search",icon:"searchSystem",placeholder:"Search property address"})}),e(S,{"data-testid":"marketing-mode-options",children:o(f,{children:[e(M,{children:"Marketing Mode"}),e(x,{hasGreyBg:!0,...n("marketingMode",{onChange:t}),"data-testid":"sync-property-marketing-mode-field",options:Object.entries(v).slice(0,2).map(([a,s])=>({id:`option-${a}`,value:a,text:s,isChecked:a===h}))})]})})]})]})},L=({data:d,marketingMode:i,onCardClick:l,expandableContent:r,onExpand:n})=>{const[c,h]=w.useState(null),p=(t,a,s)=>u=>{u.stopPropagation(),a===t?s(null):(n&&n(),s(t))};return o(E,{"data-testid":"property-table-search-results","data-force-narrow-table":"true","data-has-expandable-action":!!r,children:[o(O,{children:[e(g,{"data-testid":"address-header",children:"Address"}),e(g,{"data-testid":"property-owner-role-header",children:i==="selling"?"Vendor":"Landlord"}),e(g,{"data-testid":"property-status-header",children:"Property Status"})]}),d.map((t,a)=>{const{address:s,ownerName:u,ownerRole:N,marketingStatus:b}=U(t),m=c===a;return o(T,{onClick:()=>{l(t)},className:A(m&&"el-is-active"),"data-testid":"property-item",children:[o(D,{children:[e(y,{icon:"homeSystem",narrowLabel:"Address",narrowIsFullWidth:!0,children:s}),N?e(y,{icon:"usernameSystem",narrowLabel:N,children:u}):e(k,{}),e(y,{icon:"authenticationSystem",narrowLabel:"Property Status",children:b}),r&&e(_,{"data-testid":"property-trigger-cell",isOpen:m,onClick:p(a,c,h)})]}),r&&e(F,{"data-testid":"property-expandable-container","data-is-expanded":m,isOpen:m,children:r})]},t==null?void 0:t.id)})]})},z={Form:C,Table:L};export{z as S};
