import{j as t,a as i,F as L}from"./index-e8b020c1.js";import{Z as q,r as V,h as k,k as N,l as c,n as l,x as $,y as w,O as G,j as K}from"./elements-7fcf5525.js";import{u as Y}from"./index.esm-70abc844.js";import{c as v,a as p,o as z}from"./index.esm-c689e26d.js";import{g as B,h as W,q as Z,m as A,r as F}from"./app-fc3be005.js";import{a as g,u as J}from"./use-get-admin-setup-metadata-44fda336.js";import{u as X,a as ee}from"./use-update-admin-setup-metadata-d5cc30bc.js";import{Q as _}from"./queries-keys-1e9a6485.js";import{E as m}from"./error-messages-27b293ab.js";import"./middleware-a8d06d07.js";import"./axios-7a17aed4.js";import"./index-f4612fa3.js";import"./hooks-05c80420.js";const te={formLayout:"f1j7pgz2"},se=u=>({...g,...u}),ae=v().shape({stepOne:p().trim().required(m.FIELD_REQUIRED),stepTwo:p().trim().required(m.FIELD_REQUIRED),stepThree:p().trim().required(m.FIELD_REQUIRED),stepFour:p().trim().required(m.FIELD_REQUIRED)}),re=()=>{var b,D,I,R,M,H;const u=B(),{connectSession:f}=W(u),E=Z(),{data:e,isLoading:T}=J(),{info:h,error:S}=q(),{register:n,formState:{errors:d},handleSubmit:U,reset:C}=Y({defaultValues:se(((b=e==null?void 0:e.metadata)==null?void 0:b.stepsHeader)&&{...e==null?void 0:e.metadata.stepsHeader}),resolver:z(ae)}),r=(D=f==null?void 0:f.loginIdentity)==null?void 0:D.officeId,{mutateAsync:Q,isLoading:O}=X(),{mutateAsync:y,isLoading:x}=ee(e==null?void 0:e.id),a=O||x,P=async s=>{try{e?(await y({stepsHeader:s}),h(`Steps header has been changed successfully for '${r}' office ID`,3500)):(await Q({stepsHeader:s}),h(`Steps header has been set successfully for '${r}' office ID`,3500)),E.setQueryData(_.ARW_ADMIN_SETUP_KEYS.byOffice(r),o=>A.merge(o,{metadata:{stepsHeader:s}}))}catch(o){F(o)?S(o.readableMessage):console.log("Unknown error while update metadata",o)}},j=async()=>{try{await y({stepsHeader:g}),E.setQueryData(_.ARW_ADMIN_SETUP_KEYS.byOffice(r),s=>A.merge(s,{metadata:{stepsHeader:g}})),h(`Steps header has been reset successfully for '${r}' office ID`,3500)}catch(s){F(s)?S(s.readableMessage):console.log("Unknown error while update metadata",s)}};return V.useEffect(()=>{e!=null&&e.metadata.tailoredQuestions&&!a&&C({...e==null?void 0:e.metadata.stepsHeader})},[e,a]),T?t(k,{fullPage:!0,label:"Please wait..."}):t("div",{className:"el-wfull","data-testid":"sth-form-wrapper",children:i("form",{"data-testid":"sth-form",children:[i(N,{className:te.formLayout,children:[t(c,{children:t(l,{label:"Step One",...n("stepOne"),errorMessage:(I=d.stepOne)==null?void 0:I.message,"data-testid":"sth-step-one"})}),t(c,{children:t(l,{label:"Step Two",...n("stepTwo"),errorMessage:(R=d.stepTwo)==null?void 0:R.message,"data-testid":"sth-step-two"})}),t(c,{children:t(l,{label:"Step Three",...n("stepThree"),errorMessage:(M=d.stepThree)==null?void 0:M.message,"data-testid":"sth-step-three"})}),t(c,{children:t(l,{label:"Step Four",...n("stepFour"),errorMessage:(H=d.stepFour)==null?void 0:H.message,"data-testid":"sth-step-four"})})]}),i($,{className:"el-mt8 el-mb12",children:[e&&t(w,{intent:"default",type:"button",onClick:j,disabled:a,loading:a,"data-testid":"sth-reset-button",children:"Reset to Default"}),t(w,{onClick:U(P),disabled:a,loading:a,intent:"primary","data-testid":"sth-confirm-button",children:"Confirm"})]})]})})},oe=()=>i(L,{children:[t(G,{children:"Steps' Header Configuration"}),t(K,{children:"Awesome description/guidance about steps' header configuration"})]}),ye=()=>i(L,{children:[t(oe,{}),t(re,{})]});export{ye as default};
