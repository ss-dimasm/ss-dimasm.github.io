import{i as B,D as C}from"./department-mapping-99823d46.js";import{m as R,j as s,a3 as x,d as _}from"./app-fc3be005.js";import"./index-e8b020c1.js";import"./elements-7fcf5525.js";import{w as o}from"./index-c5c95794.js";import"./with-plugins-2b39eb23.js";import{M as G,a as w,S as Y,b as q,R as z,T as O}from"./options-21b6589e.js";import{i as k,r as U}from"./object-manipulation-71eb9c9f.js";import{g as $}from"./rooms-naming-0ec8ee01.js";const W={notes:"nvr41b7",title:"t17ec4y0",fullWidthButton:"f1bnafcw"},E=(u,e)=>e.find(r=>r.id===u),L=(u,e,r)=>{const v=r?` ${r}`:"";if(s(u)&&s(e))return`${u} to ${e}${v}`;if(s(u)&&!s(e))return`${u}${v}`;if(s(e)&&!s(u))return`${e}${v}`},F=u=>{if(Number.isFinite(+u))return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(+u)},j=u=>{const{contact:e,applicant:r}=u,v=()=>{if(s(e==null?void 0:e.forename)&&s(e==null?void 0:e.surname))return`${e==null?void 0:e.forename} ${e==null?void 0:e.surname}`;if(s(e==null?void 0:e.forename)&&!s(e==null?void 0:e.surname))return e==null?void 0:e.forename;if(!s(e==null?void 0:e.forename)&&s(e==null?void 0:e.surname))return e==null?void 0:e.surname},T=()=>{var P;const n=e==null?void 0:e.primaryAddress,A=(P=B.whereAlpha2((n==null?void 0:n.countryId)??""))==null?void 0:P.country,f={buildingName:n==null?void 0:n.buildingName,buildingNumberAndLine1:n!=null&&n.buildingNumber||n!=null&&n.line1?`${n==null?void 0:n.buildingNumber} ${n==null?void 0:n.line1}`.trim():void 0,countryId:A,postcode:n==null?void 0:n.postcode};return U(f),x(Object.values(f))};return[{label:"Title",value:o(e==null?void 0:e.title)},{label:"Name",value:o(v())},{label:"Email",value:o(e==null?void 0:e.email)},{label:"Mobile Number",value:o(e==null?void 0:e.mobilePhone)},{label:"Home Phone",value:o(e==null?void 0:e.homePhone)},{label:"Work Phone",value:o(e==null?void 0:e.workPhone)},{label:"Address",value:o(T()),className:"el-span8"},{label:"Department",value:o(()=>{var n;return(n=E(r==null?void 0:r.marketingMode,G))==null?void 0:n.value})},{label:"Marketing Consent",value:o(()=>{var n;return(n=E(e==null?void 0:e.marketingConsent,w))==null?void 0:n.value})}]},V=(u,e)=>{var N,h,M,I,b,i,y;const r=u.applicant,v=e,T=()=>{var t,g,S,d;let l=F((t=r==null?void 0:r.renting)==null?void 0:t.rentFrom),m=F((g=r==null?void 0:r.renting)==null?void 0:g.rentTo);return(r==null?void 0:r.marketingMode)==="buying"&&(l=F((S=r==null?void 0:r.buying)==null?void 0:S.priceFrom),m=F((d=r==null?void 0:r.buying)==null?void 0:d.priceTo)),L(l,m)},n=()=>{var l,m;return(r==null?void 0:r.locationType)==="addresses"?(l=r==null?void 0:r.locationOptions)==null?void 0:l[0]:x(((m=u.choosenArea)==null?void 0:m.map(t=>t.name))??[])},A=(l,m)=>{var g,S;if(!m)return;const t=v.getQueryData(["configuration"]);return(S=(g=t==null?void 0:t[l])==null?void 0:g.find(d=>d.id===m))==null?void 0:S.value},f=()=>{var g;const l="DD MMMM YYYY",m=(g=r==null?void 0:r.renting)==null?void 0:g.moveDate,t=_(m).format(l);if(_(t,l,!0).isValid())return t},P=[{label:"Applicant Status",value:o(A("applicantStatuses",r==null?void 0:r.statusId))},{label:"Potential Client",value:r!=null&&r.potentialClient?"Yes":"No"},{label:"Selling Position",value:o((N=E(r==null?void 0:r.sellingPosition,Y))==null?void 0:N.value)},{label:"Selling Status",value:o((h=E(r==null?void 0:r.sellingStatus,q))==null?void 0:h.value)},{label:"Location",value:o(n())},{label:"Budget",value:o(T())}];return(r==null?void 0:r.marketingMode)==="renting"?(k(P,4,{label:"Renting Reason",value:o(A("rentingPositions",(M=r==null?void 0:r.renting)==null?void 0:M.positionId))}),P.push({label:"Renting Frequently",value:o((b=E((I=r.renting)==null?void 0:I.rentFrequency,z))==null?void 0:b.value)},{label:"Desired Moving Date",value:o(f())})):k(P,4,{label:"Buying Position",value:o(A("buyingPositions",(i=r==null?void 0:r.buying)==null?void 0:i.positionId))},{label:"Buying Reason",value:o(A("buyingReasons",(y=r==null?void 0:r.buying)==null?void 0:y.reasonId))}),P},K=u=>{var N,h,M,I;const e=u.applicant,r=(e==null?void 0:e.marketingMode)==="buying",v=()=>{const b={buying:()=>{var y;const i=(y=e.buying)==null?void 0:y.tenure;if(s(i))return i.reduce((l,m,t)=>{const g=O.buying.find(S=>S.value===m).label;return t?`${l}, ${g}`:g},"")},renting:()=>{var y,l;const i=(y=e.renting)==null?void 0:y.term;if(s(i))return i==="any"?x(Object.values(O.renting).reduce((m,t)=>[...m,t.label],[])):(l=O.renting.find(m=>m.value===i))==null?void 0:l.label}};return e!=null&&e.marketingMode?b[e.marketingMode]:void 0},T=()=>{var m,t,g,S;const b=(m=e==null?void 0:e.internalArea)==null?void 0:m.amount;if(!b)return;const i=Intl.NumberFormat("en-GB",{style:"unit",unit:((t=e==null?void 0:e.internalArea)==null?void 0:t.type)==="squareFeet"?"foot":"meter"}).format(b),y=10.764,l=Intl.NumberFormat("en-GB",{style:"unit",unit:((g=e==null?void 0:e.internalArea)==null?void 0:g.type)!=="squareFeet"?"foot":"meter"}).format(((S=e==null?void 0:e.internalArea)==null?void 0:S.type)==="squareFeet"?Math.round(b/y):Math.round(b*y));return`${i}² (${l}²)`},n=()=>{var y,l;const{amountFrom:b,amountTo:i}=(e==null?void 0:e.externalArea)??{};if(s(b)&&s(i))return`${L((y=e==null?void 0:e.externalArea)==null?void 0:y.amountFrom,(l=e==null?void 0:e.externalArea)==null?void 0:l.amountTo)} acres`},A=()=>{const b=n(),i=T();if(s(b)&&s(i))return`${b}, ${i}`;if(s(b)&&!s(i))return b;if(!s(b)&&s(i))return i},f=(b,i)=>{if(i)return b==="SPECIAL"?x(i):i.reduce((y,l,m)=>{var g,S,d;const t=((d=(S=(g=C[b])==null?void 0:g[l])==null?void 0:S.split(", "))==null?void 0:d[0])??l;return m?`${y}, ${t}`:t},"")},P=[{label:"Property Type",value:o(f("TYPE",e==null?void 0:e.type))},{label:"Property Style",value:o(f("STYLE",e==null?void 0:e.style))},{label:"Property Outdoor",value:o(f("SITUATION",e==null?void 0:e.situation))},{label:"Must have",value:o(f("SPECIAL",e==null?void 0:e.specialFeatures))},{label:"Property Age",value:o(f("AGE",e==null?void 0:e.age))},{label:"Parking",value:o(f("PARKING",e==null?void 0:e.parking))},{label:"Locality",value:o(f("LOCALITY",e==null?void 0:e.locality))},{label:"Bedroom",value:o($(e,"bedrooms"))},{label:"Reception Room",value:o($(e,"receptions"))},{label:"Bathroom",value:o($(e,"bathrooms"))},{label:"Tenure",value:o(v())},{label:"Property sizes",value:o(A())}];return r&&k(P,11,{label:"Lease Remaining",value:o(L((h=(N=e.buying)==null?void 0:N.leaseRemaining)==null?void 0:h.min,(I=(M=e.buying)==null?void 0:M.leaseRemaining)==null?void 0:I.max,"Years"))}),P},Q=u=>{var e;return[{label:"Notes",value:o((e=u.applicant)==null?void 0:e.notes),className:W.notes}]},re=(u,e,r)=>e?{contact:()=>j(e),status:()=>V(e,r),requirements:()=>K(e),notes:()=>Q(e)}[u]():[],ne=u=>{var v,T,n,A,f,P,N,h,M;const e=R.cloneDeep(u);return((v=e==null?void 0:e.applicant)==null?void 0:v.marketingMode)==="buying"&&!((n=(T=e.applicant.buying)==null?void 0:T.tenure)!=null&&n.includes("leasehold"))&&(e.applicant.buying={...e.applicant.buying,leaseRemaining:{}}),(A=e==null?void 0:e.applicant)!=null&&A.externalArea&&!((f=e==null?void 0:e.applicant.externalArea)!=null&&f.amountFrom)&&(e.applicant.externalArea.amountFrom=0),(P=e==null?void 0:e.applicant)!=null&&P.externalArea&&!(e!=null&&e.applicant.externalArea.amountTo)&&(e.applicant.externalArea.amountTo=0),["applicant.bathroomsMin","applicant.bathroomsMax","applicant.bedroomsMin","applicant.bedroomsMax","applicant.receptionsMin","applicant.receptionsMax"].forEach(I=>{R.get(e,I)==null&&R.set(e,I,0)}),((N=e==null?void 0:e.contact)==null?void 0:N.homePhone)===null&&(e.contact.homePhone=""),((h=e==null?void 0:e.contact)==null?void 0:h.workPhone)===null&&(e.contact.workPhone=""),((M=e==null?void 0:e.contact)==null?void 0:M.mobilePhone)===null&&(e.contact.mobilePhone=""),e};export{ne as A,W as e,re as g,F as w};
